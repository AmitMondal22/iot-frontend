"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[8917],{708:(M,u,s)=>{s.d(u,{d:()=>O});var d=s(9862),i=s(5219),e=s(4769),C=s(3859),v=s(95),g=s(981),_=s(8814),h=s(9252),c=s(7327),r=s(6814);const Z=function(){return{standalone:!0}};let O=(()=>{var m;class D{constructor(o,t,n,a,l,p,P){this.layoutService=o,this.fb=t,this.http=n,this.productService=a,this.messageService=l,this.confirmationService=p,this.api=P,this.filteredCountries=[],this.filteredDealer=[],this.countries=[],this.selectedState=null,this.data1=[],this.cities=[],this.liveData=[],this.flowData=[],this.flowDate=[],this.rpmData=[],this.rpmDate=[],this.subscription=this.layoutService.configUpdate$.subscribe(T=>{this.initCharts()})}ngOnInit(){this.initCharts(),this.getDevice(),setInterval(()=>{this.currTm=" | "+(new Date).toString().substring(16,24)+" ",this.currDt=(new Date).toString().substring(0,15)}),setInterval(()=>{this.selectedDealer?.device_name?this.getDeviceLiveData(this.selectedDealer?.device_name):console.log("hii"),this.getDevice()},2e4)}getDevice(){const o=this.api.baseUrl,t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.http.get(o+"/device/list",{headers:n}).subscribe(a=>{console.log(a),this.data1=a,this.cities=this.data1.data},a=>{console.error(a)})}dateConvt(o){const t=new Date(o),l=`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`;return console.log(l),l}getDeviceLiveData(o){if(o){const t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.liveData=[],this.liveData2=null,this.http.post(this.api.baseUrl+"/device-data/last",{device_id:o},{headers:n}).subscribe(l=>{console.log(l),this.data1=l,this.data1=this.data1.data,this.data1&&(this.flowDate=[],this.flowData=[],this.rpmDate=[],this.rpmData=[],this.liveData=this.data1.chart_data_list,this.liveData2=this.data1.device_data_list,this.liveData.forEach(p=>{this.flowDate.push(this.dateConvt(p.created_at)),this.flowData.push(p.flow),this.rpmDate.push(this.dateConvt(p.created_at)),this.rpmData.push(p.rpm.toString()),console.log(this.flowDate),console.log(this.flowData),console.log(this.rpmDate),console.log(this.rpmData)}),this.flowDate&&this.flowData&&this.rpmDate&&this.rpmData&&this.initCharts())},l=>{console.error(l)})}}setDevice(){console.log(this.selectedDealer),this.getDeviceLiveData(this.selectedDealer.device_name)}filterDealer(o){const t=[],n=o.query;for(let a=0;a<this.cities.length;a++){const l=this.cities[a];0==l.device_name.toLowerCase().indexOf(n.toLowerCase())&&t.push(l)}this.filteredDealer=t}initCharts(){const o=getComputedStyle(document.documentElement),t=o.getPropertyValue("--text-color"),n=o.getPropertyValue("--text-color-secondary"),a=o.getPropertyValue("--surface-border");this.flow={labels:this.flowDate,datasets:[{label:"flow",data:this.flowData,fill:!1,backgroundColor:"green",borderColor:"green",tension:.4}]},this.rpm={labels:this.rpmDate,datasets:[{label:"RPM",data:this.rpmData,fill:!1,backgroundColor:"red",borderColor:"red",tension:.4}]},this.lineOptions={plugins:{legend:{labels:{fontColor:t}}},scales:{x:{ticks:{color:n},grid:{color:a,drawBorder:!1}},y:{ticks:{color:n},grid:{color:a,drawBorder:!1}}}}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(m=D).\u0275fac=function(o){return new(o||m)(e.Y36(C.P),e.Y36(v.qu),e.Y36(d.eN),e.Y36(g.M),e.Y36(i.ez),e.Y36(i.YP),e.Y36(_.s))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ng-component"]],features:[e._Bn([i.ez,i.YP])],decls:91,vars:21,consts:[[1,"grid","p-fluid"],[1,"col-12","lg:col-12"],[1,"card",2,"padding","0!important"],[1,"grid",2,"margin-left","0rem!important"],[1,"col-12","lg:col-2","xl:col-1"],[1,"livenow"],[1,"col-12","lg:col-2","xl:col-7"],[2,"margin-top","32px"],[1,"field","col-12","md:col-3",2,"margin-left","54px"],["placeholder","Device Id","field","device_name",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","onSelect","completeMethod"],[1,"col-12","lg:col-6","xl:col-4"],[1,"card","mb-0","xcard"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],["src","assets/demo/images/access/voltage.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/current.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/rpm2.png","alt","logo",2,"height","65px"],[1,"col-12","lg:col-6","xl:col-3"],["src","assets/demo/images/access/freq_run.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/freq_setting.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/air-flow.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/time-icon.png","alt","logo",1,"xxx"],[1,"col-12","lg:col-6"],[1,"card"],["type","line",3,"data","options"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"div"),e.TgZ(7,"h5"),e._uU(8,"Live"),e.qZA()()(),e.TgZ(9,"div",6)(10,"h4",7),e._uU(11),e.ALo(12,"date"),e.qZA()(),e.TgZ(13,"div",8)(14,"label"),e._uU(15,"\xa0"),e.qZA(),e.TgZ(16,"p-autoComplete",9),e.NdJ("ngModelChange",function(a){return t.selectedDealer=a})("onSelect",function(){return t.setDevice()})("completeMethod",function(a){return t.filterDealer(a)}),e.qZA()()()(),e.TgZ(17,"div",3)(18,"div",10)(19,"div",11)(20,"div",12)(21,"div")(22,"span",13),e._uU(23,"DC Bus Voltage"),e.qZA(),e.TgZ(24,"div",14),e._uU(25),e.qZA()(),e._UZ(26,"img",15),e.qZA()()(),e.TgZ(27,"div",10)(28,"div",11)(29,"div",12)(30,"div")(31,"span",13),e._uU(32,"Output Current"),e.qZA(),e.TgZ(33,"div",14),e._uU(34),e.qZA()(),e._UZ(35,"img",16),e.qZA()()(),e.TgZ(36,"div",10)(37,"div",11)(38,"div",12)(39,"div")(40,"span",13),e._uU(41,"Output RPM"),e.qZA(),e.TgZ(42,"div",14),e._uU(43),e.qZA()(),e._UZ(44,"img",17),e.qZA()()(),e.TgZ(45,"div",18)(46,"div",11)(47,"div",12)(48,"div")(49,"span",13),e._uU(50,"Settings Frequency"),e.qZA(),e.TgZ(51,"div",14),e._uU(52),e.qZA()(),e._UZ(53,"img",19),e.qZA()()(),e.TgZ(54,"div",18)(55,"div",11)(56,"div",12)(57,"div")(58,"span",13),e._uU(59,"Running Frequency"),e.qZA(),e.TgZ(60,"div",14),e._uU(61),e.qZA()(),e._UZ(62,"img",20),e.qZA()()(),e.TgZ(63,"div",18)(64,"div",11)(65,"div",12)(66,"div")(67,"span",13),e._uU(68,"Flow"),e.qZA(),e.TgZ(69,"div",14),e._uU(70),e.qZA()(),e._UZ(71,"img",21),e.qZA()()(),e.TgZ(72,"div",18)(73,"div",11)(74,"div",12)(75,"div")(76,"span",13),e._uU(77,"Run Time"),e.qZA(),e.TgZ(78,"div",14),e._uU(79),e.qZA()(),e._UZ(80,"img",22),e.qZA()()()()(),e.TgZ(81,"div",23)(82,"div",24)(83,"h5"),e._uU(84,"Flow Graph"),e.qZA(),e._UZ(85,"p-chart",25),e.qZA()(),e.TgZ(86,"div",23)(87,"div",24)(88,"h5"),e._uU(89,"RPM Graph"),e.qZA(),e._UZ(90,"p-chart",25),e.qZA()()()),2&o&&(e.xp6(11),e.AsE("Last Updated: ",e.xi3(12,17,t.currDt,"dd-MM-yyyy")," ",t.currTm,""),e.xp6(5),e.Q6J("ngModel",t.selectedDealer)("ngModelOptions",e.DdM(20,Z))("suggestions",t.filteredDealer)("dropdown",!0),e.xp6(9),e.hij("",t.liveData2?t.liveData2.dc_bus_voltage:0," V"),e.xp6(9),e.hij(" ",t.liveData2?t.liveData2.output_current:0," A"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.rpm:0," "),e.xp6(9),e.hij("",t.liveData2?t.liveData2.settings_freq:0," Hz"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.running_freq:0," Hz"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.flow:0," % "),e.xp6(9),e.hij("",t.liveData2?t.liveData2.time:0," Hrs"),e.xp6(6),e.Q6J("data",t.flow)("options",t.lineOptions),e.xp6(5),e.Q6J("data",t.rpm)("options",t.lineOptions))},dependencies:[h.C,c.Qc,v.JJ,v.On,r.uU],styles:["body[_ngcontent-%COMP%]{background-color:#333;h5 {font-family: sans-serif; color: #666; text-transform: uppercase; text-align: center; display: block; padding-top: 20px;}}.holder[_ngcontent-%COMP%]{max-width:455px;margin:0 auto}.holder[_ngcontent-%COMP%]   .follow[_ngcontent-%COMP%]{display:block;text-decoration:none;font-family:sans-serif;font-size:12px;color:#666;text-align:center}.livenow[_ngcontent-%COMP%]{margin-top:23px;width:30px;margin-left:15px;display:inline-block}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{vertical-align:middle;width:22px;height:22px;border-radius:100%;position:absolute;margin:0 auto;border:3px solid rgb(255,0,0);animation:_ngcontent-%COMP%_live 1.4s infinite ease-in-out;animation-fill-mode:both}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){background-color:#ffffff4d;background-color:#f81010;animation-delay:-.1s}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.16s}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.42s;border:3px solid rgba(255,255,255,.5)}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){border:3px solid rgba(255,255,255,1);animation-delay:-.42s}@keyframes _ngcontent-%COMP%_live{0%,80%,to{transform:scale(.6);-webkit-transform:scale(.6)}40%{transform:scale(1);-webkit-transform:scale(1)}}.xcard[_ngcontent-%COMP%]{height:100%!important}.xxx[_ngcontent-%COMP%]{height:90px}"]}),D})()},8468:(M,u,s)=>{s.d(u,{x:()=>v});var d=s(1180),i=s(4769),e=s(4713),C=s(2332);let v=(()=>{var g;class _ extends e.s{constructor(...c){super(...c),(0,d.Z)(this,"pathId",void 0)}ngOnInit(){this.pathId="url(#"+(0,C.Th)()+")"}}return g=_,(0,d.Z)(_,"\u0275fac",function(){let h;return function(r){return(h||(h=i.n5z(g)))(r||g)}}()),(0,d.Z)(_,"\u0275cmp",i.Xpm({type:g,selectors:[["TimesCircleIcon"]],standalone:!0,features:[i.qOj,i.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(c,r){1&c&&(i.O4$(),i.TgZ(0,"svg",0)(1,"g"),i._UZ(2,"path",1),i.qZA(),i.TgZ(3,"defs")(4,"clipPath",2),i._UZ(5,"rect",3),i.qZA()()()),2&c&&(i.Tol(r.getClassNames()),i.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),i.xp6(1),i.uIk("clip-path",r.pathId),i.xp6(3),i.Q6J("id",r.pathId))},encapsulation:2})),_})()}}]);