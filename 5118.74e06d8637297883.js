"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[5118],{2584:(nt,v,n)=>{n.r(v),n.d(v,{FloatlabelDemoModule:()=>st});var A=n(6814),u=n(95),Z=n(3557),m=n(9862),h=n(5118),g=n(5219),N=n(3026),t=n(4769),U=n(8814),x=n(981),_=n(707),f=n(3714),D=n(7680),T=n(4104),y=n(2947),M=n(9232),F=n(1312);const S=["view"];function k(i,r){if(1&i){const s=t.EpF();t.TgZ(0,"span",13),t._UZ(1,"i",14),t.TgZ(2,"button",15),t.NdJ("click",function(){t.CHM(s);const e=t.oxw();return t.KtG(e.openNew())}),t.qZA()()}}function J(i,r){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Cust ID"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Customer Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mobile No"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Address"),t.qZA(),t.TgZ(9,"th",16),t._uU(10,"View full Details"),t.qZA(),t.TgZ(11,"th",16),t._uU(12,"Edit Details"),t.qZA()())}function I(i,r){if(1&i){const s=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",17)(10,"button",18),t.NdJ("click",function(){const a=t.CHM(s).$implicit,l=t.oxw();return t.KtG(l.show(a))}),t.qZA()(),t.TgZ(11,"td",17)(12,"button",19),t.NdJ("click",function(){const a=t.CHM(s).$implicit,l=t.oxw();return t.KtG(l.editProduct(a))}),t.qZA()()()}if(2&i){const s=r.$implicit;t.xp6(2),t.Oqu(s.id),t.xp6(2),t.Oqu(s.name),t.xp6(2),t.Oqu(s.mobile_no),t.xp6(2),t.Oqu(s.adress)}}function z(i,r){1&i&&(t.TgZ(0,"div",20),t._UZ(1,"p-progressSpinner"),t.qZA())}function P(i,r){1&i&&(t.TgZ(0,"small",27),t._uU(1,"Customer Name is required."),t.qZA())}function B(i,r){1&i&&(t.TgZ(0,"small",27),t._uU(1,"Customer Name is required."),t.qZA())}function G(i,r){1&i&&(t.TgZ(0,"small",27),t._uU(1,"Customer Name is required."),t.qZA())}function Y(i,r){if(1&i){const s=t.EpF();t.TgZ(0,"div",21)(1,"label",22),t._uU(2,"Full Name"),t.qZA(),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(e){t.CHM(s);const a=t.oxw();return t.KtG(a.product.name=e)}),t.qZA(),t.YNc(4,P,2,0,"small",24),t.qZA(),t.TgZ(5,"div",21)(6,"label",22),t._uU(7,"Mobile"),t.qZA(),t.TgZ(8,"input",25),t.NdJ("ngModelChange",function(e){t.CHM(s);const a=t.oxw();return t.KtG(a.product.mobile_no=e)}),t.qZA(),t.YNc(9,B,2,0,"small",24),t.qZA(),t.TgZ(10,"div",21)(11,"label",22),t._uU(12,"Address"),t.qZA(),t.TgZ(13,"input",26),t.NdJ("ngModelChange",function(e){t.CHM(s);const a=t.oxw();return t.KtG(a.product.adress=e)}),t.qZA(),t.YNc(14,G,2,0,"small",24),t.qZA()}if(2&i){const s=t.oxw();t.xp6(3),t.Q6J("ngModel",s.product.name),t.xp6(1),t.Q6J("ngIf",s.submitted&&!s.product.name),t.xp6(4),t.Q6J("ngModel",s.product.mobile_no),t.xp6(1),t.Q6J("ngIf",s.submitted&&!s.product.mobile_no),t.xp6(4),t.Q6J("ngModel",s.product.adress),t.xp6(1),t.Q6J("ngIf",s.submitted&&!s.product.adress)}}function w(i,r){if(1&i){const s=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(s);const e=t.oxw();return t.KtG(e.hideDialog())}),t.qZA(),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(s);const e=t.oxw();return t.KtG(e.saveProduct())}),t.qZA()}}const q=function(){return{"min-width":"50rem"}},Q=function(){return{width:"450px"}};let O=(()=>{var i;class r{constructor(o,e,a,l,p,c){this.api=o,this.productService=e,this.http=a,this.billID=l,this.dialogService=p,this.messageService=c,this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=2,this.productDialog=!1,this.submitted=!1,this.data1=[]}ngOnInit(){this.getAllCustomer()}onPageChange(o){this.first=o.first,this.rows=o.rows,this.goingPage=o.page+1,this.loadNewPage(this.goingPage)}loadNewPage(o){this.spinner=!0;const e=this.api.baseUrl,a=localStorage.getItem("token"),l=(new m.WM).set("Authorization",`Bearer ${a}`);this.http.get(e+"/report/my_bill?page="+o,{headers:l}).subscribe(p=>{this.spinner=!1,this.stockApi=p,this.stockList=this.stockApi.data})}getAllCustomer(){this.totalPGNO=0,this.spinner=!0;const o=this.api.baseUrl,e=localStorage.getItem("token"),a=(new m.WM).set("Authorization",`Bearer ${e}`);this.http.get(o+"/customer/customer_list",{headers:a}).subscribe(l=>{this.spinner=!1,console.log(l),this.stockApi=l,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.totalPGNO=this.stockApi.total},l=>{this.spinner=!1,console.error(l)})}searchAll(o){this.spinner=!0;const e=this.api.baseUrl,a=localStorage.getItem("token"),l=(new m.WM).set("Authorization",`Bearer ${a}`);this.http.get(e+"/report/my_bill?page=1&search="+o.target.value.toString(),{headers:l}).subscribe(p=>{this.spinner=!1,this.stockApi=p,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}hideDialog(){this.productDialog=!1,this.submitted=!1}editProduct(o){this.product={...o},this.productDialog=!0}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}AddCompany(o,e,a){const l={name:o,adress:e,mobile_no:a},p=this.api.baseUrl,c=localStorage.getItem("token"),b=(new m.WM).set("Authorization",`Bearer ${c}`);this.http.post(p+"/customer/customer_add",l,{headers:b}).subscribe(d=>{d&&(this.hideDialog(),console.log(d),this.messageService.add({severity:"success",summary:"Successful",detail:"Company Created",life:3e3}),this.getAllCustomer())},d=>{console.error(d)})}DeleteCompany(o){const e={company_id:o},a=this.api.baseUrl,l=localStorage.getItem("token"),p=(new m.WM).set("Authorization",`Bearer ${l}`);this.http.post(a+"/master/delete_company_name",e,{headers:p}).subscribe(c=>{console.log(c),this.messageService.add({severity:"success",summary:"Successful",detail:"Company Deleted",life:3e3}),this.getAllCustomer()},c=>{console.error(c)})}show(o){this.billID.cust_id=0,this.billID.cust_id=o.id,this.ref=this.dialogService.open(N.D,{header:"Customer Full Details",data:{id:o.cust_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(e=>{e&&this.messageService.add({severity:"info",summary:"Product Selected",detail:e.name})}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}saveProduct(){this.submitted=!0,this.product.name?.trim()&&(this.product.id?this.updateCompany(this.product.id,this.product.name,this.product.adress,this.product.mobile_no):this.AddCompany(this.product.name,this.product.adress,this.product.mobile_no),this.products=[...this.products],this.productDialog=!1,this.product={})}updateCompany(o,e,a,l){const p={id:o,name:e,adress:a,mobile_no:l},c=this.api.baseUrl,b=localStorage.getItem("token"),d=(new m.WM).set("Authorization",`Bearer ${b}`);this.http.post(c+"/customer/customer_edit",p,{headers:d}).subscribe(C=>{this.hideDialog(),console.log(C),this.messageService.add({severity:"success",summary:"Successful",detail:"Customer Updated",life:3e3}),this.getAllCustomer()},C=>{console.error(C)})}ngOnDestroy(){this.ref&&this.ref.close()}}return(i=r).\u0275fac=function(o){return new(o||i)(t.Y36(U.s),t.Y36(x.M),t.Y36(m.eN),t.Y36(x.M),t.Y36(h.xA),t.Y36(g.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(o,e){if(1&o&&t.Gf(S,7),2&o){let a;t.iGM(a=t.CRH())&&(e.view=a.first)}},features:[t._Bn([h.xA,g.ez])],decls:14,vars:12,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","spinner_overlay",4,"ngIf"],["header","Customer Details","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pButton","","pRipple","","label","Add New Customer","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],[2,"width","10rem"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-eye",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[1,"spinner_overlay"],[1,"field"],["for","name"],["type","text","pInputText","","id","name","required","","autofocus","",3,"ngModel","ngModelChange"],["class","p-error",4,"ngIf"],["type","text","pInputText","","id","mobile","required","","autofocus","",3,"ngModel","ngModelChange"],["type","text","pInputText","","id","address","required","","autofocus","",3,"ngModel","ngModelChange"],[1,"p-error"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"div",1)(3,"p-table",2,3),t.YNc(5,k,3,0,"ng-template",4),t.YNc(6,J,13,0,"ng-template",5),t.YNc(7,I,13,4,"ng-template",6),t.qZA(),t.TgZ(8,"div",7)(9,"p-paginator",8),t.NdJ("onPageChange",function(l){return e.onPageChange(l)}),t.qZA()()(),t.YNc(10,z,2,0,"div",9),t.qZA(),t.TgZ(11,"p-dialog",10),t.NdJ("visibleChange",function(l){return e.productDialog=l}),t.YNc(12,Y,15,6,"ng-template",11),t.YNc(13,w,2,0,"ng-template",12),t.qZA()),2&o&&(t.xp6(3),t.Q6J("value",e.stockList)("tableStyle",t.DdM(10,q)),t.xp6(6),t.Q6J("first",e.first)("rows",e.rows)("totalRecords",e.totalPGNO),t.xp6(1),t.Q6J("ngIf",e.spinner),t.xp6(1),t.Akn(t.DdM(11,Q)),t.Q6J("visible",e.productDialog)("modal",!0))},dependencies:[A.O5,u.Fj,u.JJ,u.Q7,u.On,g.jx,_.Hq,f.o,D.G,T.FN,y.D,M.iA,F.V],encapsulation:2}),r})(),$=(()=>{var i;class r{}return(i=r).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.Bz.forChild([{path:"",component:O}]),Z.Bz]}),r})();var H=n(7327),R=n(6760),W=n(1480),L=n(3965),K=n(9663),j=n(5167),E=n(8062),V=n(4055),X=n(6218),tt=n(4037),et=n(8052),ot=n(1825),it=n(6022);let st=(()=>{var i;class r{}return(i=r).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[g.ez,g.YP],imports:[A.ez,u.u5,$,H.WN,R._8,W.Gg,L.kW,K.zz,j.L$,E.XH,V.q4,X.A,f.j,tt.FI,et.f,ot.C,f.j,L.kW,it.Xt,_.hJ,D.L,h.DL,T.EV,y.U,M.U$,F.S]}),r})()}}]);