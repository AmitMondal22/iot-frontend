"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[3113],{3113:(U,k,o)=>{o.r(k),o.d(k,{ButtonDemoModule:()=>j});var a=o(6814),_=o(3557),n=o(9862),l=o(95),y=o(5219),B=o(253),Z=o(5118),t=o(4769),D=o(8814),I=o(7744),T=o(981),A=o(7680),m=o(218),p=o(707),d=o(3714),c=o(5167),u=o(6218),x=o(1865),C=o(4104);function S(r,f){if(1&r){const g=t.EpF();t.TgZ(0,"div",26)(1,"h5",27),t._uU(2),t.qZA(),t.TgZ(3,"div",4)(4,"div",5)(5,"label"),t._uU(6,"Company Name"),t.qZA(),t._UZ(7,"input",28,16),t.qZA(),t.TgZ(9,"div",5)(10,"label"),t._uU(11,"Product Name"),t.qZA(),t._UZ(12,"input",29,16),t.qZA(),t.TgZ(14,"div",5)(15,"label"),t._uU(16,"Model Name"),t.qZA(),t._UZ(17,"input",30,16),t.qZA(),t.TgZ(19,"div",5)(20,"label"),t._uU(21,"Barcode Number"),t.qZA(),t._UZ(22,"input",31,16),t.qZA(),t.TgZ(24,"div",32)(25,"label"),t._uU(26,"Price(\u20b9)"),t.qZA(),t.TgZ(27,"input",33,16),t.NdJ("change",function(i){const s=t.CHM(g).index,b=t.oxw();return t.KtG(b.priceChange(i,s))}),t.qZA()(),t.TgZ(29,"div",32)(30,"label"),t._uU(31,"Disc.(%)"),t.qZA(),t.TgZ(32,"input",34,16),t.NdJ("change",function(i){const s=t.CHM(g).index,b=t.oxw();return t.KtG(b.disChange(i,s))}),t.qZA()(),t.TgZ(34,"div",32)(35,"label"),t._uU(36,"Warranty"),t.qZA(),t._UZ(37,"input",35,16),t.qZA(),t.TgZ(39,"div",32)(40,"label"),t._uU(41,"Remove"),t.qZA(),t.TgZ(42,"p-button",36),t.NdJ("click",function(){const h=t.CHM(g).index,s=t.oxw();return t.KtG(s.removeSkill(h))}),t.qZA()()()()}if(2&r){const g=f.index;t.Q6J("formGroupName",g),t.xp6(1),t.MGl("for","skill",g,""),t.xp6(1),t.hij("Item No ",g+1,":")}}function E(r,f){if(1&r&&(t.TgZ(0,"div",37),t._UZ(1,"p-radioButton",38),t.TgZ(2,"label",39),t._uU(3),t.qZA()()),2&r){const g=f.$implicit,e=t.oxw();t.xp6(1),t.Q6J("inputId",g.name)("value",g.name)("ariaChecked",e.setTotPrice()),t.xp6(1),t.Q6J("for",g.name),t.xp6(1),t.Oqu(g.name)}}function J(r,f){1&r&&(t.TgZ(0,"div",40),t._UZ(1,"p-progressSpinner"),t.qZA())}let G=(()=>{var r;class f{constructor(e,i,h,s,b,v,F){this.api=e,this.countryService=i,this.fb=h,this.http=s,this.messageService=b,this.billID=v,this.dialogService=F,this.categories=[{name:"paid"},{name:"unpaid"}],this.stockList=[],this.productDtls=[],this.spinner=!1,this.tot_ant=0,this.existItem=!1,this.showPrintButton=!0,this.fullPaid=!1,this.G_Bill=this.fb.group({c_id:[""],p_num:["",l.kI.required],c_name:["",[l.kI.required]],c_add:["",[l.kI.required]],bar_code:[],paid_status:["",[l.kI.required]],total_amt:["",[l.kI.required]],paid_amt:["",[l.kI.required]],sl_no:this.fb.array([])})}ngOnInit(){this.ct=this.G_Bill.controls}get skillsFormArray(){return this.G_Bill.get("sl_no")}getCustomerDtls(e){const i={mobile_no:e.target.value},h=this.api.baseUrl,s=localStorage.getItem("token"),b=(new n.WM).set("Authorization",`Bearer ${s}`);this.spinner=!0,this.http.post(h+"/customer/serch_customer_mobile",i,{headers:b}).subscribe(v=>{console.log(v),this.existingCustomer=v,this.spinner=!1,1==this.existingCustomer.status?(this.ct.c_name.setValue(this.existingCustomer.data.name),this.ct.c_add.setValue(this.existingCustomer.data.adress),this.ct.c_id.setValue(this.existingCustomer.data.id),this.messageService.add({severity:"success",summary:"Successful",detail:"Get Existing Customer",life:3e3})):(this.ct.c_id.setValue(0),this.messageService.add({severity:"error",summary:"Error",detail:"No Old Customer Found",life:3e3}))},v=>{this.spinner=!1,console.error(v),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side !!",life:3e3})})}searchProduct(e){if(13===e.keyCode){this.spinner=!0;const i=this.api.baseUrl,h=localStorage.getItem("token"),s=(new n.WM).set("Authorization",`Bearer ${h}`);this.http.get(i+"/stock/stock_product?page=1&search="+e.target.value.toString(),{headers:s}).subscribe(b=>{if(this.spinner=!1,this.stockApi=b,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.stockList.length>0&&this.skillsFormArray.value.length>0){for(let v=0;v<this.skillsFormArray.value.length;v++){if(this.skillsFormArray.value[v].barcode_no==this.stockList[0].serial_number){this.existItem=!0;break}this.existItem=!1}this.existItem?this.messageService.add({severity:"error",summary:"Error",detail:"You Can not Scan Same BarCode in the Bill Section",life:3e3}):(this.skillsFormArray.push(this.fb.group({company_name:this.stockList[0].company_name,product_name:this.stockList[0].product_name,product_store_id:this.stockList[0].product_store_id,model_name:this.stockList[0].model_name,model_id:this.stockList[0].model_id,barcode_no:this.stockList[0].serial_number,price:this.stockList[0].sales_rate,discount:"0",warranty:"0"})),this.productDtls=this.skillsFormArray.value)}else this.stockList.length>0&&0==this.skillsFormArray.value.length?(this.skillsFormArray.push(this.fb.group({company_name:this.stockList[0].company_name,product_name:this.stockList[0].product_name,product_store_id:this.stockList[0].product_store_id,model_name:this.stockList[0].model_name,model_id:this.stockList[0].model_id,barcode_no:this.stockList[0].serial_number,price:this.stockList[0].sales_rate,discount:"0",warranty:"0"})),this.productDtls=this.skillsFormArray.value):this.messageService.add({severity:"error",summary:"Error",detail:"No Product Found,",life:3e3})}),this.ct.bar_code.setValue("")}}addSkill(){this.skillsFormArray.push(this.fb.control(""))}removeSkill(e){this.skillsFormArray.removeAt(e)}saveData(){for(let s=0;s<this.skillsFormArray.value.length;s++){const b=this.formatedDate(this.skillsFormArray.value[s].warranty);this.skillsFormArray.value[s].warranty=b}const e=this.api.baseUrl,i=localStorage.getItem("token"),h=(new n.WM).set("Authorization",`Bearer ${i}`);console.log(this.G_Bill.value),this.spinner=!0,this.http.post(e+"/billing/new",this.G_Bill.value,{headers:h}).subscribe(s=>{console.log(s),this.printData=s,this.spinner=!1,"success"==this.printData.status?(this.BillId=this.printData.bill_id,this.messageService.add({severity:"success",summary:"Successful",detail:"New Bill Create",life:3e3}),this.BillId>0&&(this.show(),this.resetData())):(this.showPrintButton=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Failed in bill creation",life:3e3}))},s=>{this.spinner=!1,console.error(s),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side !!",life:3e3})})}resetData(){this.G_Bill.reset(),this.skillsFormArray.removeAt(0);for(let e=0;e<=this.skillsFormArray.length;e++)this.skillsFormArray.removeAt(e)}priceChange(e,i){this.skillsFormArray.controls[i].get("discount").setValue((100-100*Number(e.target.value)/Number(this.productDtls[i].price)).toFixed(2))}disChange(e,i){this.skillsFormArray.controls[i].get("price").setValue((Number(this.productDtls[i].price)-Number(this.productDtls[i].price)*Number(e.target.value)/100).toFixed(2))}formatedDate(e){const i=new Date;let h=i.getFullYear(),s=i.getMonth()+1;s+=Number(e);const b=h+Math.floor((s-1)/12);return new Date(b,(s-1)%12+1-1,i.getDate()).toISOString().split("T")[0]}setTotPrice(){this.tot_ant=0;for(let e=0;e<this.skillsFormArray.value.length;e++)this.tot_ant+=Number(this.skillsFormArray.value[e].price);this.ct.total_amt.setValue(this.tot_ant),"paid"==this.ct.paid_status.value?(this.ct.paid_amt.setValue(0),this.fullPaid=!0):this.fullPaid=!1}show(){this.billID.billing_id=0,this.billID.billing_id=this.BillId,this.ref=this.dialogService.open(B.u,{header:"Full Billing Details",data:{id:this.BillId},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(e=>{e&&this.messageService.add({severity:"info",summary:"Product Selected",detail:e.name})}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}}return(r=f).\u0275fac=function(e){return new(e||r)(t.Y36(D.s),t.Y36(I.T),t.Y36(l.qu),t.Y36(n.eN),t.Y36(y.ez),t.Y36(T.M),t.Y36(Z.xA))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],features:[t._Bn([y.ez,Z.xA])],decls:43,vars:8,consts:[[1,"grid"],[1,"col-12","md:col-12"],[1,"card"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-2"],["htmlFor","firstname2"],["pInputText","","type","number","formControlName","p_num",3,"change"],[1,"field","col-12","md:col-4"],["htmlFor","lastname2"],["pInputText","","type","text","formControlName","c_name"],[1,"field","col-12","md:col-6"],["htmlFor","city"],["rows","1","cols","30","pInputTextarea","","formControlName","c_add"],[1,"field","col-12","md:col-12"],["pInputText","","type","text","pAutoFocus","","formControlName","bar_code",3,"autofocus","keyup"],["itemInput",""],["formArrayName","sl_no"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","field-checkbox",4,"ngFor","ngForOf"],["id","disabled-input","pInputText","","type","text","formControlName","total_amt",3,"disabled"],["inputId","integeronly","formControlName","paid_amt",3,"disabled"],[1,"field","col-12","md:col-2",2,"margin-top","2%"],["icon","pi pi-check","styleClass","p-button-primary ","label","Save",3,"disabled","click"],["icon","pi pi-refresh","styleClass","p-button-danger","label","Reset",3,"click"],["class","spinner_overlay",4,"ngIf"],[3,"formGroupName"],[3,"for"],["pInputText","","type","text","formControlName","company_name"],["pInputText","","type","text","formControlName","product_name"],["pInputText","","type","text","formControlName","model_name"],["pInputText","","type","text","formControlName","barcode_no"],[1,"field","col-12","md:col-1"],["pInputText","","type","text","formControlName","price",3,"change"],["pInputText","","type","text","formControlName","discount",3,"change"],["pInputText","","type","text","formControlName","warranty"],["icon","pi pi-times","styleClass","p-button-danger",3,"click"],[1,"field-checkbox"],["formControlName","paid_status",3,"inputId","value","ariaChecked"],[1,"ml-2",3,"for"],[1,"spinner_overlay"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),t._uU(4,"Bill Generate"),t.qZA(),t.TgZ(5,"form",3)(6,"div",4)(7,"div",5)(8,"label",6),t._uU(9,"Mobile Number"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("change",function(s){return i.getCustomerDtls(s)}),t.qZA()(),t.TgZ(11,"div",8)(12,"label",9),t._uU(13,"Customer Name"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"div",11)(16,"label",12),t._uU(17,"Address"),t.qZA(),t._UZ(18,"textarea",13),t.qZA(),t.TgZ(19,"div",14)(20,"div",2)(21,"h5"),t._uU(22,"Scan Barcode"),t.qZA(),t.TgZ(23,"input",15,16),t.NdJ("keyup",function(s){return i.searchProduct(s)}),t.qZA(),t.TgZ(25,"div",17),t.YNc(26,S,43,3,"div",18),t.qZA()()(),t.TgZ(27,"div",5),t.YNc(28,E,4,5,"div",19),t.qZA(),t.TgZ(29,"div",5)(30,"label"),t._uU(31,"Total Amount:"),t.qZA(),t._UZ(32,"input",20),t.qZA(),t.TgZ(33,"div",5)(34,"label"),t._uU(35,"Paid Amount:"),t.qZA(),t._UZ(36,"p-inputNumber",21),t.qZA(),t.TgZ(37,"div",22)(38,"p-button",23),t.NdJ("click",function(){return i.saveData()}),t.qZA()(),t.TgZ(39,"div",22)(40,"p-button",24),t.NdJ("click",function(){return i.resetData()}),t.qZA()()()()()()(),t._UZ(41,"p-toast"),t.YNc(42,J,2,0,"div",25)),2&e&&(t.xp6(5),t.Q6J("formGroup",i.G_Bill),t.xp6(18),t.Q6J("autofocus",!0),t.xp6(3),t.Q6J("ngForOf",i.skillsFormArray.controls),t.xp6(2),t.Q6J("ngForOf",i.categories),t.xp6(4),t.Q6J("disabled",!0),t.xp6(4),t.Q6J("disabled",i.fullPaid),t.xp6(2),t.Q6J("disabled",0==i.skillsFormArray.length),t.xp6(4),t.Q6J("ngIf",i.spinner))},dependencies:[a.sg,a.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,A.G,m.P,p.zx,d.o,c.Rn,u.g,x.EU,C.FN],encapsulation:2}),f})(),z=(()=>{var r;class f{}return(r=f).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild([{path:"",component:G}]),_.Bz]}),f})();var Y=o(4480),Q=o(6804),M=o(7327),L=o(6760),O=o(1480),P=o(3965),N=o(9663),W=o(8057),R=o(1312),V=o(3904),q=o(9552);let j=(()=>{var r;class f{}return(r=f).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[y.ez,y.YP],imports:[a.ez,l.u5,l.UX,z,A.L,M.WN,L._8,O.Gg,P.kW,N.zz,c.L$,Q.KZ,u.A,x.cc,d.j,W.nD,p.hJ,Y.T,R.S,V.D,C.EV,l.u5,l.UX,M.WN,L._8,O.Gg,P.kW,N.zz,c.L$,u.A,d.j,q.U$,Z.DL,A.L]}),f})()},6804:(U,k,o)=>{o.d(k,{CO:()=>T,KZ:()=>A});var a=o(1180),_=o(6814),n=o(4769),l=o(95),y=o(4480);const B=function(m,p){return{"p-button-icon":!0,"p-button-icon-left":m,"p-button-icon-right":p}};function Z(m,p){if(1&m&&n._UZ(0,"span",3),2&m){const d=n.oxw();n.Tol(d.checked?d.onIcon:d.offIcon),n.Q6J("ngClass",n.WLB(3,B,"left"===d.iconPos,"right"===d.iconPos))}}function t(m,p){if(1&m&&(n.TgZ(0,"span",4),n._uU(1),n.qZA()),2&m){const d=n.oxw();n.xp6(1),n.Oqu(d.checked?d.hasOnLabel?d.onLabel:"":d.hasOffLabel?d.offLabel:"")}}const D=function(m,p,d){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":m,"p-highlight":p,"p-disabled":d}},I={provide:l.JU,useExisting:(0,n.Gpc)(()=>T),multi:!0};let T=(()=>{var m;class p{constructor(c){(0,a.Z)(this,"cd",void 0),(0,a.Z)(this,"onLabel",void 0),(0,a.Z)(this,"offLabel",void 0),(0,a.Z)(this,"onIcon",void 0),(0,a.Z)(this,"offIcon",void 0),(0,a.Z)(this,"ariaLabelledBy",void 0),(0,a.Z)(this,"disabled",void 0),(0,a.Z)(this,"style",void 0),(0,a.Z)(this,"styleClass",void 0),(0,a.Z)(this,"inputId",void 0),(0,a.Z)(this,"tabindex",void 0),(0,a.Z)(this,"iconPos","left"),(0,a.Z)(this,"onChange",new n.vpe),(0,a.Z)(this,"checked",!1),(0,a.Z)(this,"onModelChange",()=>{}),(0,a.Z)(this,"onModelTouched",()=>{}),this.cd=c}toggle(c){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:c,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(c){this.checked=c,this.cd.markForCheck()}registerOnChange(c){this.onModelChange=c}registerOnTouched(c){this.onModelTouched=c}setDisabledState(c){this.disabled=c,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return m=p,(0,a.Z)(p,"\u0275fac",function(c){return new(c||m)(n.Y36(n.sBO))}),(0,a.Z)(p,"\u0275cmp",n.Xpm({type:m,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[n._Bn([I])],decls:3,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(c,u){1&c&&(n.TgZ(0,"div",0),n.NdJ("click",function(C){return u.toggle(C)})("keydown.enter",function(C){return u.toggle(C)}),n.YNc(1,Z,1,6,"span",1),n.YNc(2,t,2,1,"span",2),n.qZA()),2&c&&(n.Tol(u.styleClass),n.Q6J("ngClass",n.kEZ(8,D,u.onIcon&&u.offIcon&&!u.hasOnLabel&&!u.hasOffLabel,u.checked,u.disabled))("ngStyle",u.style),n.uIk("tabindex",u.disabled?null:"0")("aria-checked",u.checked),n.xp6(1),n.Q6J("ngIf",u.onIcon||u.offIcon),n.xp6(1),n.Q6J("ngIf",u.onLabel||u.offLabel))},dependencies:[_.mk,_.O5,_.PC,y.H],styles:['.p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default;pointer-events:none}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}'],changeDetection:0})),p})(),A=(()=>{var m;class p{}return m=p,(0,a.Z)(p,"\u0275fac",function(c){return new(c||m)}),(0,a.Z)(p,"\u0275mod",n.oAB({type:m})),(0,a.Z)(p,"\u0275inj",n.cJS({imports:[_.ez,y.T]})),p})()}}]);