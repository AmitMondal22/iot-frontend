"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[8917],{708:(Z,v,s)=>{s.d(v,{d:()=>O});var g=s(9862),o=s(5219),u=s(6814),e=s(4769),C=s(3859),c=s(95),_=s(981),p=s(8814),h=s(9252),r=s(7327);const M=function(){return{standalone:!0}};let O=(()=>{var m;class D{constructor(a,t,n,i,l,d,T,P){this.datePipe=a,this.layoutService=t,this.fb=n,this.http=i,this.productService=l,this.messageService=d,this.confirmationService=T,this.api=P,this.filteredCountries=[],this.filteredDealer=[],this.countries=[],this.selectedState=null,this.data1=[],this.cities=[],this.liveData=[],this.flowData=[],this.flowDate=[],this.rpmData=[],this.rpmDate=[],this.lastUpdateTime="",this.subscription=this.layoutService.configUpdate$.subscribe(U=>{this.initCharts()})}convertToISTDateTime(a){const t=new Date(a),i=new Date(t.getTime()-198e5);return this.datePipe.transform(i,"dd/MM/yyyy HH:mm:ss","en-IN")||""}ngOnInit(){this.initCharts(),this.getDevice(),setInterval(()=>{this.currTm=" | "+(new Date).toString().substring(16,24)+" ",this.currDt=(new Date).toString().substring(0,15)}),setInterval(()=>{this.selectedDealer?.device_name?this.getDeviceLiveData(this.selectedDealer?.device_name):console.log("hii"),this.getDevice()},2e4)}getDevice(){const a=this.api.baseUrl,t=localStorage.getItem("token"),n=(new g.WM).set("Authorization",`Bearer ${t}`);this.http.get(a+"/device/list",{headers:n}).subscribe(i=>{console.log(i),this.data1=i,this.cities=this.data1.data},i=>{console.error(i)})}dateConvt(a){const t=new Date(a),l=`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`;return console.log(l),l}getDeviceLiveData(a){if(a){const t=localStorage.getItem("token"),n=(new g.WM).set("Authorization",`Bearer ${t}`);this.liveData=[],this.liveData2=null,this.http.post(this.api.baseUrl+"/device-data/last",{device_id:a},{headers:n}).subscribe(l=>{console.log(l),this.data1=l,this.data1=this.data1.data,this.data1&&(this.flowDate=[],this.flowData=[],this.rpmDate=[],this.rpmData=[],this.liveData=this.data1.chart_data_list,this.liveData2=this.data1.device_data_list,this.liveData.forEach(d=>{this.flowDate.push(this.dateConvt(d.created_at)),this.flowData.push(d.flow),this.rpmDate.push(this.dateConvt(d.created_at)),this.rpmData.push(d.rpm.toString()),console.log(this.flowDate),console.log(this.flowData),console.log(this.rpmDate),console.log(this.rpmData)}),this.flowDate&&this.flowData&&this.rpmDate&&this.rpmData&&(this.lastUpdateTime="",this.lastUpdateTime=this.convertToISTDateTime(this.liveData2.created_at),console.log(this.lastUpdateTime),this.initCharts()))},l=>{console.error(l)})}}dateChange(a){const d=new Date(this.liveData2.created_at).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:"Asia/Kolkata"});return console.log(d),d}setDevice(){console.log(this.selectedDealer),this.getDeviceLiveData(this.selectedDealer.device_name)}filterDealer(a){const t=[],n=a.query;for(let i=0;i<this.cities.length;i++){const l=this.cities[i];0==l.device_name.toLowerCase().indexOf(n.toLowerCase())&&t.push(l)}this.filteredDealer=t}initCharts(){const a=getComputedStyle(document.documentElement),t=a.getPropertyValue("--text-color"),n=a.getPropertyValue("--text-color-secondary"),i=a.getPropertyValue("--surface-border");this.flow={labels:this.flowDate,datasets:[{label:"flow",data:this.flowData,fill:!1,backgroundColor:"green",borderColor:"green",tension:.4}]},this.rpm={labels:this.rpmDate,datasets:[{label:"RPM",data:this.rpmData,fill:!1,backgroundColor:"red",borderColor:"red",tension:.4}]},this.lineOptions={plugins:{legend:{labels:{fontColor:t}}},scales:{x:{ticks:{color:n},grid:{color:i,drawBorder:!1}},y:{ticks:{color:n},grid:{color:i,drawBorder:!1}}}}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(m=D).\u0275fac=function(a){return new(a||m)(e.Y36(u.uU),e.Y36(C.P),e.Y36(c.qu),e.Y36(g.eN),e.Y36(_.M),e.Y36(o.ez),e.Y36(o.YP),e.Y36(p.s))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ng-component"]],features:[e._Bn([o.ez,o.YP,u.uU])],decls:90,vars:17,consts:[[1,"grid","p-fluid"],[1,"col-12","lg:col-12"],[1,"card",2,"padding","0!important"],[1,"grid",2,"margin-left","0rem!important"],[1,"col-12","lg:col-2","xl:col-1"],[1,"livenow"],[1,"col-12","lg:col-2","xl:col-7"],[2,"margin-top","32px"],[1,"field","col-12","md:col-3",2,"margin-left","54px"],["placeholder","Device Id","field","device_name",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","onSelect","completeMethod"],[1,"col-12","lg:col-6","xl:col-4"],[1,"card","mb-0","xcard"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],["src","assets/demo/images/access/current2.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/rpm.png","alt","logo",2,"height","65px"],[1,"col-12","lg:col-6","xl:col-3"],["src","assets/demo/images/access/freq_setting2.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/freq_run2.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/spfull1.png","alt","logo",1,"xxx"],["src","assets/demo/images/access/time-icon2.png","alt","logo",1,"xxx"],[1,"col-12","lg:col-6"],[1,"card"],["type","line",3,"data","options"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"div"),e.TgZ(7,"h5"),e._uU(8,"Live"),e.qZA()()(),e.TgZ(9,"div",6)(10,"h4",7),e._uU(11),e.qZA()(),e.TgZ(12,"div",8)(13,"label"),e._uU(14,"\xa0"),e.qZA(),e.TgZ(15,"p-autoComplete",9),e.NdJ("ngModelChange",function(i){return t.selectedDealer=i})("onSelect",function(){return t.setDevice()})("completeMethod",function(i){return t.filterDealer(i)}),e.qZA()()()(),e.TgZ(16,"div",3)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div")(21,"span",13),e._uU(22,"DC Bus Voltage"),e.qZA(),e.TgZ(23,"div",14),e._uU(24),e.qZA()(),e._UZ(25,"img",15),e.qZA()()(),e.TgZ(26,"div",10)(27,"div",11)(28,"div",12)(29,"div")(30,"span",13),e._uU(31,"Output Current"),e.qZA(),e.TgZ(32,"div",14),e._uU(33),e.qZA()(),e._UZ(34,"img",15),e.qZA()()(),e.TgZ(35,"div",10)(36,"div",11)(37,"div",12)(38,"div")(39,"span",13),e._uU(40,"Output RPM"),e.qZA(),e.TgZ(41,"div",14),e._uU(42),e.qZA()(),e._UZ(43,"img",16),e.qZA()()(),e.TgZ(44,"div",17)(45,"div",11)(46,"div",12)(47,"div")(48,"span",13),e._uU(49,"Settings Frequency"),e.qZA(),e.TgZ(50,"div",14),e._uU(51),e.qZA()(),e._UZ(52,"img",18),e.qZA()()(),e.TgZ(53,"div",17)(54,"div",11)(55,"div",12)(56,"div")(57,"span",13),e._uU(58,"Running Frequency"),e.qZA(),e.TgZ(59,"div",14),e._uU(60),e.qZA()(),e._UZ(61,"img",19),e.qZA()()(),e.TgZ(62,"div",17)(63,"div",11)(64,"div",12)(65,"div")(66,"span",13),e._uU(67,"Flow"),e.qZA(),e.TgZ(68,"div",14),e._uU(69),e.qZA()(),e._UZ(70,"img",20),e.qZA()()(),e.TgZ(71,"div",17)(72,"div",11)(73,"div",12)(74,"div")(75,"span",13),e._uU(76,"Run Hrs"),e.qZA(),e.TgZ(77,"div",14),e._uU(78),e.qZA()(),e._UZ(79,"img",21),e.qZA()()()()(),e.TgZ(80,"div",22)(81,"div",23)(82,"h5"),e._uU(83,"Flow Graph"),e.qZA(),e._UZ(84,"p-chart",24),e.qZA()(),e.TgZ(85,"div",22)(86,"div",23)(87,"h5"),e._uU(88,"RPM Graph"),e.qZA(),e._UZ(89,"p-chart",24),e.qZA()()()),2&a&&(e.xp6(11),e.hij("Last Updated: ",t.lastUpdateTime,""),e.xp6(4),e.Q6J("ngModel",t.selectedDealer)("ngModelOptions",e.DdM(16,M))("suggestions",t.filteredDealer)("dropdown",!0),e.xp6(9),e.hij("",t.liveData2?t.liveData2.dc_bus_voltage:0," V"),e.xp6(9),e.hij(" ",t.liveData2?t.liveData2.output_current:0," A"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.rpm:0," "),e.xp6(9),e.hij("",t.liveData2?t.liveData2.settings_freq:0," Hz"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.running_freq:0," Hz"),e.xp6(9),e.hij("",t.liveData2?t.liveData2.flow:0," % "),e.xp6(9),e.Oqu(t.liveData2?t.liveData2.time:0),e.xp6(6),e.Q6J("data",t.flow)("options",t.lineOptions),e.xp6(5),e.Q6J("data",t.rpm)("options",t.lineOptions))},dependencies:[h.C,r.Qc,c.JJ,c.On],styles:["body[_ngcontent-%COMP%]{background-color:#333;h5 {font-family: sans-serif; color: #666; text-transform: uppercase; text-align: center; display: block; padding-top: 20px;}}.holder[_ngcontent-%COMP%]{max-width:455px;margin:0 auto}.holder[_ngcontent-%COMP%]   .follow[_ngcontent-%COMP%]{display:block;text-decoration:none;font-family:sans-serif;font-size:12px;color:#666;text-align:center}.livenow[_ngcontent-%COMP%]{margin-top:23px;width:30px;margin-left:15px;display:inline-block}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{vertical-align:middle;width:22px;height:22px;border-radius:100%;position:absolute;margin:0 auto;border:3px solid rgb(255,0,0);animation:_ngcontent-%COMP%_live 1.4s infinite ease-in-out;animation-fill-mode:both}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){background-color:#ffffff4d;background-color:#f81010;animation-delay:-.1s}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.16s}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.42s;border:3px solid rgba(255,255,255,.5)}.livenow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){border:3px solid rgba(255,255,255,1);animation-delay:-.42s}@keyframes _ngcontent-%COMP%_live{0%,80%,to{transform:scale(.6);-webkit-transform:scale(.6)}40%{transform:scale(1);-webkit-transform:scale(1)}}.xcard[_ngcontent-%COMP%]{height:100%!important}.xxx[_ngcontent-%COMP%]{height:60px}"]}),D})()},8468:(Z,v,s)=>{s.d(v,{x:()=>C});var g=s(1180),o=s(4769),u=s(4713),e=s(2332);let C=(()=>{var c;class _ extends u.s{constructor(...h){super(...h),(0,g.Z)(this,"pathId",void 0)}ngOnInit(){this.pathId="url(#"+(0,e.Th)()+")"}}return c=_,(0,g.Z)(_,"\u0275fac",function(){let p;return function(r){return(p||(p=o.n5z(c)))(r||c)}}()),(0,g.Z)(_,"\u0275cmp",o.Xpm({type:c,selectors:[["TimesCircleIcon"]],standalone:!0,features:[o.qOj,o.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(h,r){1&h&&(o.O4$(),o.TgZ(0,"svg",0)(1,"g"),o._UZ(2,"path",1),o.qZA(),o.TgZ(3,"defs")(4,"clipPath",2),o._UZ(5,"rect",3),o.qZA()()()),2&h&&(o.Tol(r.getClassNames()),o.uIk("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),o.xp6(1),o.uIk("clip-path",r.pathId),o.xp6(3),o.Q6J("id",r.pathId))},encapsulation:2})),_})()}}]);