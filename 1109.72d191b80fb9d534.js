"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[1109],{1109:(oe,A,a)=>{a.r(A),a.d(A,{FloatlabelDemoModule:()=>ie});var u=a(6814),g=a(95),D=a(3557),d=a(9862),v=a(5118),h=a(5219),N=a(3026),e=a(4769),z=a(8814),C=a(981),y=a(707),S=a(4055),Z=a(7680),F=a(4104),L=a(2947),U=a(9232),k=a(1312);const M=["view"];function I(s,c){1&s&&(e.TgZ(0,"tr")(1,"th",12),e._uU(2,"Organization Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Device Name"),e.qZA()())}function J(s,c){if(1&s&&(e.TgZ(0,"tr")(1,"td",16),e._uU(2,"\xa0"),e.qZA(),e.TgZ(3,"td",14),e._uU(4),e.qZA()()),2&s){const l=c.$implicit,i=c.index;e.xp6(4),e.AsE("",i+1,"-> ",l.device.device_name,"")}}function P(s,c){if(1&s&&(e.TgZ(0,"tr",13)(1,"td",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4," \xa0 "),e.qZA()(),e.YNc(5,J,5,2,"tr",15)),2&s){const l=c.$implicit;e.xp6(2),e.Oqu(l.origination_name),e.xp6(3),e.Q6J("ngForOf",l.assign_devices)}}function B(s,c){1&s&&(e.TgZ(0,"div",17),e._UZ(1,"p-progressSpinner"),e.qZA())}function G(s,c){if(1&s&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&s){const l=c.$implicit;e.Q6J("value",l.origination_id),e.xp6(1),e.hij(" ",l.origination_name," ")}}function O(s,c){if(1&s&&(e.TgZ(0,"form",18)(1,"div",19)(2,"label",20),e._uU(3,"Select Organization"),e.qZA(),e.TgZ(4,"select",21),e.YNc(5,G,2,2,"option",22),e.qZA()(),e.TgZ(6,"div",19)(7,"label",20),e._uU(8,"Select Devices"),e.qZA(),e._UZ(9,"p-multiSelect",23),e.qZA()()),2&s){const l=e.oxw();e.Q6J("formGroup",l.formGroup),e.xp6(5),e.Q6J("ngForOf",l.companys),e.xp6(4),e.Q6J("options",l.devices)}}function _(s,c){if(1&s){const l=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(l);const t=e.oxw();return e.KtG(t.hideDialog())}),e.qZA(),e.TgZ(1,"button",26),e.NdJ("click",function(){e.CHM(l);const t=e.oxw();return e.KtG(t.saveProduct())}),e.qZA()}}const w=function(){return{"min-width":"50rem"}},Y=function(){return{width:"450px",height:"540px"}};let $=(()=>{var s;class c{constructor(i,t,n,o,r,p){this.api=i,this.productService=t,this.http=n,this.billID=o,this.dialogService=r,this.messageService=p,this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=2,this.productDialog=!1,this.submitted=!1,this.data1=[],this.editdevices=[],this.companys=[]}ngOnInit(){this.formGroup=new g.cw({selectedDevices:new g.NI([]),org_id:new g.NI(["",g.kI.required])}),this.ct=this.formGroup.controls,this.getDevice(),this.getOrganization(),this.getAllStock()}getAllStock(){this.spinner=!0,this.totalPGNO=0;const i=this.api.baseUrl,t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.http.get(i+"/assign-device/list-origination-to-device",{headers:n}).subscribe(o=>{this.spinner=!1,console.log(o),this.stockApi=o,this.stockList=this.stockApi.data},o=>{this.spinner=!1,console.error(o)})}getOrganization(){const i=this.api.baseUrl,t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.http.get(i+"/master/list-origination",{headers:n}).subscribe(o=>{console.log(o),this.companyList=o,this.companys=this.companyList.data},o=>{console.error(o)})}getDevice(){const i=this.api.baseUrl,t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.http.get(i+"/device/list",{headers:n}).subscribe(o=>{console.log(o),this.modelList=o,this.devices=this.modelList.data;for(let r=0;r<this.devices.length;r++)this.devices[r].assign_device_id=0},o=>{console.error(o)})}onPageChange(i){this.first=i.first,this.rows=i.rows,this.goingPage=i.page+1,this.loadNewPage(this.goingPage)}loadNewPage(i){this.spinner=!0;const t=this.api.baseUrl,n=localStorage.getItem("token"),o=(new d.WM).set("Authorization",`Bearer ${n}`);this.http.get(t+"/report/my_bill?page="+i,{headers:o}).subscribe(r=>{this.spinner=!1,this.stockApi=r,this.stockList=this.stockApi.data})}getAllCustomer(){this.totalPGNO=0,this.spinner=!0;const i=this.api.baseUrl,t=localStorage.getItem("token"),n=(new d.WM).set("Authorization",`Bearer ${t}`);this.http.get(i+"/customer/customer_list",{headers:n}).subscribe(o=>{this.spinner=!1,console.log(o),this.stockApi=o,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.totalPGNO=this.stockApi.total},o=>{this.spinner=!1,console.error(o)})}searchAll(i){this.spinner=!0;const t=this.api.baseUrl,n=localStorage.getItem("token"),o=(new d.WM).set("Authorization",`Bearer ${n}`);this.http.get(t+"/report/my_bill?page=1&search="+i.target.value.toString(),{headers:o}).subscribe(r=>{this.spinner=!1,this.stockApi=r,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}hideDialog(){this.productDialog=!1,this.submitted=!1}editProduct(i){this.product={...i},this.productDialog=!0}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}AddCompany(i,t,n){const o={name:i,adress:t,mobile_no:n},r=this.api.baseUrl,p=localStorage.getItem("token"),f=(new d.WM).set("Authorization",`Bearer ${p}`);this.http.post(r+"/customer/customer_add",o,{headers:f}).subscribe(m=>{m&&(this.hideDialog(),console.log(m),this.messageService.add({severity:"success",summary:"Successful",detail:"Device Assigned",life:3e3}),this.getAllStock())},m=>{console.error(m)})}DeleteCompany(i){const t={company_id:i},n=this.api.baseUrl,o=localStorage.getItem("token"),r=(new d.WM).set("Authorization",`Bearer ${o}`);this.http.post(n+"/master/delete_company_name",t,{headers:r}).subscribe(p=>{console.log(p),this.messageService.add({severity:"success",summary:"Successful",detail:"Company Deleted",life:3e3}),this.getAllCustomer()},p=>{console.error(p)})}show(i){this.billID.cust_id=0,this.billID.cust_id=i.id,this.ref=this.dialogService.open(N.D,{header:"Customer Full Details",data:{id:i.cust_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(t=>{t&&this.messageService.add({severity:"info",summary:"Product Selected",detail:t.name})}),this.ref.onMaximize.subscribe(t=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${t.maximized}`})})}saveProduct(){this.submitted=!0,this.productDialog=!1;const i={all_device:this.ct.selectedDevices.value,organization_id:this.ct.org_id.value},t=this.api.baseUrl,n=localStorage.getItem("token"),o=(new d.WM).set("Authorization",`Bearer ${n}`);this.http.post(t+"/assign-device/add-multiple-origination",i,{headers:o}).subscribe(r=>{r&&(this.hideDialog(),console.log(r),this.messageService.add({severity:"success",summary:"Successful",detail:"Device Assigned",life:3e3}),this.getAllStock())},r=>{console.error(r)})}selectProduct(i){this.editdevices=[],this.product={},this.submitted=!1,this.productDialog=!0;const t=this.stockList.filter(n=>n.origination_id==i)[0];for(let n=0;n<t.assign_devices.length;n++)t.assign_devices[n].device.assign_device_id=t.assign_devices[n].assign_device_id,this.editdevices.push(t.assign_devices[n].device);console.log(this.editdevices),this.formGroup.patchValue({org_id:i,selectedDevices:this.editdevices})}updateCompany(i,t,n,o){const r={id:i,name:t,adress:n,mobile_no:o},p=this.api.baseUrl,f=localStorage.getItem("token"),m=(new d.WM).set("Authorization",`Bearer ${f}`);this.http.post(p+"/customer/customer_edit",r,{headers:m}).subscribe(b=>{this.hideDialog(),console.log(b),this.messageService.add({severity:"success",summary:"Successful",detail:"Customer Updated",life:3e3}),this.getAllCustomer()},b=>{console.error(b)})}ngOnDestroy(){this.ref&&this.ref.close()}}return(s=c).\u0275fac=function(i){return new(i||s)(e.Y36(z.s),e.Y36(C.M),e.Y36(d.eN),e.Y36(C.M),e.Y36(v.xA),e.Y36(h.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(i,t){if(1&i&&e.Gf(M,7),2&i){let n;e.iGM(n=e.CRH())&&(t.view=n.first)}},features:[e._Bn([v.xA,h.ez])],decls:13,vars:13,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],["pButton","","pRipple","","label","Assign Device","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],["selectionMode","single","dataKey","code",3,"value","selection","tableStyle","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","spinner_overlay",4,"ngIf"],["header","Device Management","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[2,"width","200px!important"],[2,"margin-left","20px","background-color","rgb(242, 242, 247)"],[2,"font-weight","600","font-size","larger"],[4,"ngFor","ngForOf"],[2,"width","50px"],[1,"spinner_overlay"],[3,"formGroup"],[1,"field"],["for","name"],["formControlName","org_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],[3,"value",4,"ngFor","ngForOf"],["formControlName","selectedDevices","optionLabel","device_name","placeholder","Select Devices",3,"options"],[3,"value"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"button",2),e.NdJ("click",function(){return t.openNew()}),e.qZA(),e.TgZ(4,"p-table",3),e.NdJ("selectionChange",function(o){return t.selectedProduct2=o}),e.YNc(5,I,5,0,"ng-template",4),e.YNc(6,P,6,2,"ng-template",5),e.qZA(),e.TgZ(7,"div",6)(8,"p-paginator",7),e.NdJ("onPageChange",function(o){return t.onPageChange(o)}),e.qZA()()(),e.YNc(9,B,2,0,"div",8),e.qZA(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(o){return t.productDialog=o}),e.YNc(11,O,10,3,"ng-template",10),e.YNc(12,_,2,0,"ng-template",11),e.qZA()),2&i&&(e.xp6(4),e.Q6J("value",t.stockList)("selection",t.selectedProduct2)("tableStyle",e.DdM(11,w)),e.xp6(4),e.Q6J("first",t.first)("rows",t.rows)("totalRecords",t.totalPGNO),e.xp6(1),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Akn(e.DdM(12,Y)),e.Q6J("visible",t.productDialog)("modal",!0))},dependencies:[u.sg,u.O5,g._Y,g.YN,g.Kr,g.EJ,g.JJ,g.JL,h.jx,y.Hq,S.NU,Z.G,F.FN,L.D,U.iA,k.V,g.sg,g.u],encapsulation:2}),c})(),W=(()=>{var s;class c{}return(s=c).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[D.Bz.forChild([{path:"",component:$}]),D.Bz]}),c})();var Q=a(7327),R=a(6760),j=a(1480),T=a(3965),H=a(9663),E=a(5167),K=a(8062),X=a(6218),x=a(3714),V=a(4037),q=a(8052),ee=a(1825),te=a(6022);let ie=(()=>{var s;class c{}return(s=c).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[h.ez,h.YP],imports:[u.ez,g.u5,W,Q.WN,R._8,j.Gg,T.kW,H.zz,E.L$,K.XH,S.q4,X.A,x.j,V.FI,q.f,ee.C,x.j,T.kW,te.Xt,y.hJ,Z.L,v.DL,F.EV,L.U,U.U$,k.S,g.UX]}),c})()}}]);