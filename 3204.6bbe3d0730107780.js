"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[3204],{3204:(R,u,s)=>{s.r(u),s.d(u,{ListDemoModule:()=>J});var m=s(6814),b=s(95),d=s(3557),g=s(9862),h=s(5118),p=s(5219),C=s(253),t=s(4769),L=s(8814),f=s(981),v=s(4104),Z=s(2947),A=s(9232),x=s(3714),y=s(707),T=s(7680);const D=["view"];function U(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div",10)(1,"span",11),t._UZ(2,"i",12),t.TgZ(3,"input",13),t.NdJ("keyup",function(o){t.CHM(n);const l=t.oxw();return t.KtG(l.searchAll(o))}),t.qZA()()()}2&i&&(t.xp6(3),t.Q6J("autofocus",!0))}function M(i,a){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Bill No"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Customer Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mobile No"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Billing Date"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total price"),t.qZA(),t.TgZ(11,"th",14),t._uU(12,"View Bill"),t.qZA(),t.TgZ(13,"th",14),t._uU(14,"Edit Bill"),t.qZA()())}function N(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td",15)(13,"button",16),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.show(l))}),t.qZA()(),t.TgZ(14,"td",15)(15,"button",17),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.editBill(l))}),t.qZA()()()}if(2&i){const n=a.$implicit;t.xp6(2),t.Oqu(n.billing_id),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.mobile_no),t.xp6(2),t.Oqu(n.billingdate),t.xp6(2),t.Oqu(t.xi3(11,5,n.total_price,"INR"))}}function B(i,a){1&i&&(t.TgZ(0,"div",18),t._UZ(1,"p-progressSpinner"),t.qZA())}const k=function(){return{"min-width":"50rem"}};let S=(()=>{var i;class a{constructor(e,o,l,r,c,F,G){this.api=e,this.productService=o,this.router=l,this.http=r,this.billID=c,this.dialogService=F,this.messageService=G,this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=2}ngOnInit(){this.getAllBill()}onPageChange(e){this.first=e.first,this.rows=e.rows,this.goingPage=e.page+1,this.loadNewPage(this.goingPage)}loadNewPage(e){this.spinner=!0;const o=this.api.baseUrl,l=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${l}`);this.http.get(o+"/report/my_bill?page="+e,{headers:r}).subscribe(c=>{this.spinner=!1,this.stockApi=c,this.stockList=this.stockApi.data})}getAllBill(){this.totalPGNO=0,this.spinner=!0;const e=this.api.baseUrl,o=localStorage.getItem("token"),l=(new g.WM).set("Authorization",`Bearer ${o}`);this.http.get(e+"/report/my_bill",{headers:l}).subscribe(r=>{this.spinner=!1,console.log(r),this.stockApi=r,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total},r=>{this.spinner=!1,console.error(r)})}searchAll(e){this.spinner=!0;const o=this.api.baseUrl,l=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${l}`);this.http.get(o+"/report/my_bill?page=1&search="+e.target.value.toString(),{headers:r}).subscribe(c=>{this.spinner=!1,this.stockApi=c,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}editBill(e){this.billID.billing_id=0,this.billID.billing_id=e.billing_id,this.router.navigate(["app/pages/edit_bill"])}show(e){this.billID.billing_id=0,this.billID.billing_id=e.billing_id,this.ref=this.dialogService.open(C.u,{header:"Full Billing Details",data:{id:e.billing_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(o=>{o&&this.messageService.add({severity:"info",summary:"Product Selected",detail:o.name})}),this.ref.onMaximize.subscribe(o=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${o.maximized}`})})}ngOnDestroy(){this.ref&&this.ref.close()}}return(i=a).\u0275fac=function(e){return new(e||i)(t.Y36(L.s),t.Y36(f.M),t.Y36(d.F0),t.Y36(g.eN),t.Y36(f.M),t.Y36(h.xA),t.Y36(p.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(D,7),2&e){let l;t.iGM(l=t.CRH())&&(o.view=l.first)}},features:[t._Bn([h.xA,p.ez])],decls:11,vars:7,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","spinner_overlay",4,"ngIf"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","pAutoFocus","","type","text","placeholder","Search keyword",3,"autofocus","keyup"],[2,"width","7rem"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-eye",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[1,"spinner_overlay"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"div",1)(3,"p-table",2,3),t.YNc(5,U,4,1,"ng-template",4),t.YNc(6,M,15,0,"ng-template",5),t.YNc(7,N,16,8,"ng-template",6),t.qZA(),t.TgZ(8,"div",7)(9,"p-paginator",8),t.NdJ("onPageChange",function(r){return o.onPageChange(r)}),t.qZA()()(),t.YNc(10,B,2,0,"div",9),t.qZA()),2&e&&(t.xp6(3),t.Q6J("value",o.stockList)("tableStyle",t.DdM(6,k)),t.xp6(6),t.Q6J("first",o.first)("rows",o.rows)("totalRecords",o.totalPGNO),t.xp6(1),t.Q6J("ngIf",o.spinner))},dependencies:[v.FN,p.jx,Z.D,A.iA,m.O5,x.o,y.Hq,T.G,m.H9],encapsulation:2}),a})(),I=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild([{path:"",component:S}]),d.Bz]}),a})();var P=s(4037),z=s(8052),O=s(1825),Y=s(3965),w=s(6022);let J=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[p.ez,p.YP],imports:[v.EV,Z.U,A.U$,m.ez,b.u5,I,P.FI,z.f,O.C,x.j,Y.kW,w.Xt,y.hJ,T.L,h.DL]}),a})()}}]);