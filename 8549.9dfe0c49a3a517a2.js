"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[8549],{8549:(W,w,a)=>{a.r(w),a.d(w,{FloatlabelDemoModule:()=>Kt});var y=a(6814),p=a(95),m=a(3557),u=a(9862),T=a(5118),g=a(5219),C=a(3026),o=a(4769),x=a(8814),v=a(981),k=a(707),L=a(4055),F=a(7680),N=a(4104),P=a(2947),V=a(9552),O=a(1312);const j=["view"];function K(e,n){1&e&&(o.TgZ(0,"tr",12)(1,"th",13),o._uU(2,"Organization Name"),o.qZA(),o.TgZ(3,"th",13),o._uU(4,"User Name"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Device Name"),o.qZA()())}function $(e,n){if(1&e&&(o.TgZ(0,"tr",12)(1,"td",16),o._uU(2,"\xa0"),o.qZA(),o.TgZ(3,"td",16),o._uU(4,"\xa0"),o.qZA(),o.TgZ(5,"td",14),o._uU(6),o.qZA()()),2&e){const t=n.$implicit,i=n.index;o.xp6(6),o.AsE("",i+1," -- ",t.device.device_name,"")}}function Z(e,n){if(1&e&&(o.TgZ(0,"tr",12)(1,"td",14),o._uU(2),o.qZA(),o.TgZ(3,"td",14),o._uU(4),o.qZA()(),o.YNc(5,$,7,2,"tr",15)),2&e){const t=n.$implicit;o.xp6(2),o.Oqu(t.origination_name),o.xp6(2),o.hij(" ",t.name," "),o.xp6(1),o.Q6J("ngForOf",t.assign_devices)}}function Q(e,n){1&e&&(o.TgZ(0,"div",17),o._UZ(1,"p-progressSpinner"),o.qZA())}function G(e,n){if(1&e&&(o.TgZ(0,"option",25),o._uU(1),o.qZA()),2&e){const t=n.$implicit;o.Q6J("value",t.origination_id),o.xp6(1),o.hij(" ",t.origination_name," ")}}function J(e,n){if(1&e&&(o.TgZ(0,"option",25),o._uU(1),o.qZA()),2&e){const t=n.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.name," ")}}function Y(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"form",18)(1,"div",19)(2,"label",20),o._uU(3,"Select Organization"),o.qZA(),o.TgZ(4,"select",21),o.NdJ("change",function(){o.CHM(t);const l=o.oxw();return o.KtG(l.setUser())}),o.YNc(5,G,2,2,"option",22),o.qZA()(),o.TgZ(6,"div",19)(7,"label",20),o._uU(8,"Select User"),o.qZA(),o.TgZ(9,"select",23),o.YNc(10,J,2,2,"option",22),o.qZA()(),o.TgZ(11,"div",19)(12,"label",20),o._uU(13,"Select Devices"),o.qZA(),o._UZ(14,"p-multiSelect",24),o.qZA()()}if(2&e){const t=o.oxw();o.Q6J("formGroup",t.formGroup),o.xp6(5),o.Q6J("ngForOf",t.companys),o.xp6(5),o.Q6J("ngForOf",t.users),o.xp6(4),o.Q6J("options",t.devices)}}function X(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){o.CHM(t);const l=o.oxw();return o.KtG(l.hideDialog())}),o.qZA(),o.TgZ(1,"button",27),o.NdJ("click",function(){o.CHM(t);const l=o.oxw();return o.KtG(l.saveProduct())}),o.qZA()}}const q=function(){return{"min-width":"50rem"}},ee=function(){return{width:"450px",height:"540px"}};let te=(()=>{var e;class n{constructor(i,l,r,s,d,c){this.api=i,this.productService=l,this.http=r,this.billID=s,this.dialogService=d,this.messageService=c,this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=2,this.productDialog=!1,this.submitted=!1,this.data1=[],this.editdevices=[],this.companys=[],this.users=[],this.users2=[]}ngOnInit(){this.formGroup=new p.cw({selectedDevices:new p.NI([]),org_id:new p.NI(["",p.kI.required]),user_id:new p.NI(["",p.kI.required])}),this.ct=this.formGroup.controls,this.getuser(),this.getDevice(),this.getOrganization(),this.getAllStock()}setUser(){this.users=[],this.users=this.users2.filter(i=>i.origination_id==this.ct.org_id.value)}getuser(){const i=this.api.baseUrl,l=localStorage.getItem("token"),r=(new u.WM).set("Authorization",`Bearer ${l}`);this.http.get(i+"/master/list-user",{headers:r}).subscribe(s=>{console.log(s),this.userList=s,this.users=this.userList.data,this.users2=this.userList.data},s=>{console.error(s),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}getAllStock(){this.spinner=!0,this.totalPGNO=0;const i=this.api.baseUrl,l=localStorage.getItem("token"),r=(new u.WM).set("Authorization",`Bearer ${l}`);this.http.get(i+"/assign-device/list-origination-to-device",{headers:r}).subscribe(s=>{this.spinner=!1,console.log(s),this.stockApi=s,this.stockList=this.stockApi.data,this.stockList=this.stockList.sort((d,c)=>d.origination_id-c.origination_id)},s=>{this.spinner=!1,console.error(s)})}getOrganization(){const i=this.api.baseUrl,l=localStorage.getItem("token"),r=(new u.WM).set("Authorization",`Bearer ${l}`);this.http.get(i+"/master/list-origination",{headers:r}).subscribe(s=>{console.log(s),this.companyList=s,this.companys=this.companyList.data},s=>{console.error(s)})}getDevice(){const i=this.api.baseUrl,l=localStorage.getItem("token"),r=(new u.WM).set("Authorization",`Bearer ${l}`);this.http.get(i+"/device/list",{headers:r}).subscribe(s=>{console.log(s),this.modelList=s,this.devices=this.modelList.data;for(let d=0;d<this.devices.length;d++)this.devices[d].assign_device_id=0},s=>{console.error(s)})}onPageChange(i){this.first=i.first,this.rows=i.rows,this.goingPage=i.page+1,this.loadNewPage(this.goingPage)}loadNewPage(i){this.spinner=!0;const l=this.api.baseUrl,r=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${r}`);this.http.get(l+"/report/my_bill?page="+i,{headers:s}).subscribe(d=>{this.spinner=!1,this.stockApi=d,this.stockList=this.stockApi.data})}getAllCustomer(){this.totalPGNO=0,this.spinner=!0;const i=this.api.baseUrl,l=localStorage.getItem("token"),r=(new u.WM).set("Authorization",`Bearer ${l}`);this.http.get(i+"/customer/customer_list",{headers:r}).subscribe(s=>{this.spinner=!1,console.log(s),this.stockApi=s,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.totalPGNO=this.stockApi.total},s=>{this.spinner=!1,console.error(s)})}searchAll(i){this.spinner=!0;const l=this.api.baseUrl,r=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${r}`);this.http.get(l+"/report/my_bill?page=1&search="+i.target.value.toString(),{headers:s}).subscribe(d=>{this.spinner=!1,this.stockApi=d,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}hideDialog(){this.productDialog=!1,this.submitted=!1}editProduct(i){this.product={...i},this.productDialog=!0}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}AddCompany(i,l,r){const s={name:i,adress:l,mobile_no:r},d=this.api.baseUrl,c=localStorage.getItem("token"),h=(new u.WM).set("Authorization",`Bearer ${c}`);this.http.post(d+"/customer/customer_add",s,{headers:h}).subscribe(f=>{f&&(this.hideDialog(),console.log(f),this.messageService.add({severity:"success",summary:"Successful",detail:"Device Assigned",life:3e3}),this.getAllStock())},f=>{console.error(f)})}DeleteCompany(i){const l={company_id:i},r=this.api.baseUrl,s=localStorage.getItem("token"),d=(new u.WM).set("Authorization",`Bearer ${s}`);this.http.post(r+"/master/delete_company_name",l,{headers:d}).subscribe(c=>{console.log(c),this.messageService.add({severity:"success",summary:"Successful",detail:"Company Deleted",life:3e3}),this.getAllCustomer()},c=>{console.error(c)})}show(i){this.billID.cust_id=0,this.billID.cust_id=i.id,this.ref=this.dialogService.open(C.D,{header:"Customer Full Details",data:{id:i.cust_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(l=>{l&&this.messageService.add({severity:"info",summary:"Product Selected",detail:l.name})}),this.ref.onMaximize.subscribe(l=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${l.maximized}`})})}saveProduct(){this.submitted=!0,this.productDialog=!1;const i={all_device:this.ct.selectedDevices.value,organization_id:this.ct.org_id.value,user_id:this.ct.user_id.value},l=this.api.baseUrl,r=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${r}`);this.http.post(l+"/assign-device/add-multiple-origination",i,{headers:s}).subscribe(d=>{d&&(this.hideDialog(),console.log(d),this.messageService.add({severity:"success",summary:"Successful",detail:"Device Assigned",life:3e3}),this.getAllStock())},d=>{console.error(d)})}selectProduct(i){this.editdevices=[],this.product={},this.submitted=!1,this.productDialog=!0;const l=this.stockList.filter(r=>r.origination_id==i)[0];for(let r=0;r<l.assign_devices.length;r++)l.assign_devices[r].device.assign_device_id=l.assign_devices[r].assign_device_id,this.editdevices.push(l.assign_devices[r].device);console.log(this.editdevices),this.formGroup.patchValue({org_id:i,selectedDevices:this.editdevices})}updateCompany(i,l,r,s){const d={id:i,name:l,adress:r,mobile_no:s},c=this.api.baseUrl,h=localStorage.getItem("token"),f=(new u.WM).set("Authorization",`Bearer ${h}`);this.http.post(c+"/customer/customer_edit",d,{headers:f}).subscribe(_=>{this.hideDialog(),console.log(_),this.messageService.add({severity:"success",summary:"Successful",detail:"Customer Updated",life:3e3}),this.getAllCustomer()},_=>{console.error(_)})}ngOnDestroy(){this.ref&&this.ref.close()}}return(e=n).\u0275fac=function(i){return new(i||e)(o.Y36(x.s),o.Y36(v.M),o.Y36(u.eN),o.Y36(v.M),o.Y36(T.xA),o.Y36(g.ez))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(i,l){if(1&i&&o.Gf(j,7),2&i){let r;o.iGM(r=o.CRH())&&(l.view=r.first)}},features:[o._Bn([T.xA,g.ez])],decls:13,vars:13,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],["pButton","","pRipple","","label","Assign Device","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],["selectionMode","single","dataKey","code",3,"value","selection","tableStyle","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","spinner_overlay",4,"ngIf"],["header","Device Management","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[2,"margin-left","20px","background-color","rgb(158 217 255 / 32%)"],[2,"width","200px!important"],[2,"font-weight","600","font-size","larger"],["style","margin-left: 20px;background-color: rgb(158 217 255 / 32%);",4,"ngFor","ngForOf"],[2,"width","50px"],[1,"spinner_overlay"],[3,"formGroup"],[1,"field"],["for","name"],["formControlName","org_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","user_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],["formControlName","selectedDevices","optionLabel","device_name","placeholder","Select Devices",3,"options"],[3,"value"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(i,l){1&i&&(o.TgZ(0,"div",0),o._UZ(1,"p-toast"),o.TgZ(2,"div",1)(3,"button",2),o.NdJ("click",function(){return l.openNew()}),o.qZA(),o.TgZ(4,"p-table",3),o.NdJ("selectionChange",function(s){return l.selectedProduct2=s}),o.YNc(5,K,7,0,"ng-template",4),o.YNc(6,Z,6,3,"ng-template",5),o.qZA(),o.TgZ(7,"div",6)(8,"p-paginator",7),o.NdJ("onPageChange",function(s){return l.onPageChange(s)}),o.qZA()()(),o.YNc(9,Q,2,0,"div",8),o.qZA(),o.TgZ(10,"p-dialog",9),o.NdJ("visibleChange",function(s){return l.productDialog=s}),o.YNc(11,Y,15,4,"ng-template",10),o.YNc(12,X,2,0,"ng-template",11),o.qZA()),2&i&&(o.xp6(4),o.Q6J("value",l.stockList)("selection",l.selectedProduct2)("tableStyle",o.DdM(11,q)),o.xp6(4),o.Q6J("first",l.first)("rows",l.rows)("totalRecords",l.totalPGNO),o.xp6(1),o.Q6J("ngIf",l.spinner),o.xp6(1),o.Akn(o.DdM(12,ee)),o.Q6J("visible",l.productDialog)("modal",!0))},dependencies:[y.sg,y.O5,p._Y,p.YN,p.Kr,p.EJ,p.JJ,p.JL,g.jx,k.Hq,L.NU,F.G,N.FN,P.D,V.iA,O.V,p.sg,p.u],encapsulation:2}),n})(),ie=(()=>{var e;class n{}return(e=n).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.Bz.forChild([{path:"",component:te}]),m.Bz]}),n})();var ne=a(7327),le=a(6760),oe=a(1480),R=a(3965),re=a(9663),se=a(5167),ae=a(8062),de=a(6218),H=a(3714),ce=a(4037),pe=a(8052),he=a(1825),ue=a(6022),I=a(1180),fe=a(4480),A=a(6489),me=a(6392),ge=a(4562),_e=a(3362),ve=a(2314),be=a(2591),ye=a(6005),Ce=a(1604),Te=a(3833),xe=a(1563),we=a(8717);let jt=(()=>{var e;class n{}return e=n,(0,I.Z)(n,"\u0275fac",function(i){return new(i||e)}),(0,I.Z)(n,"\u0275mod",o.oAB({type:e})),(0,I.Z)(n,"\u0275inj",o.cJS({imports:[y.ez,P.U,fe.T,A.v,we.L,_e.v,ve.H,Te.V,xe.m,me.W,be.n,Ce.V,ye.v,ge.X,g.m8,A.v]})),n})(),Kt=(()=>{var e;class n{}return(e=n).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[g.ez,g.YP],imports:[y.ez,p.u5,ie,ne.WN,le._8,oe.Gg,R.kW,re.zz,se.L$,ae.XH,L.q4,de.A,H.j,ce.FI,pe.f,he.C,H.j,R.kW,ue.Xt,k.hJ,F.L,T.DL,N.EV,P.U,V.U$,O.S,p.UX,jt]}),n})()},1604:(W,w,a)=>{a.d(w,{V:()=>T});var y=a(1180),p=a(6814),m=a(4769),u=a(4713);let T=(()=>{var g;class C extends u.s{}return g=C,(0,y.Z)(C,"\u0275fac",function(){let o;return function(v){return(o||(o=m.n5z(g)))(v||g)}}()),(0,y.Z)(C,"\u0275cmp",m.Xpm({type:g,selectors:[["MinusIcon"]],standalone:!0,features:[m.qOj,m.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(x,v){1&x&&(m.O4$(),m.TgZ(0,"svg",0),m._UZ(1,"path",1),m.qZA()),2&x&&(m.Tol(v.getClassNames()),m.uIk("aria-label",v.ariaLabel)("aria-hidden",v.ariaHidden)("role",v.role))},dependencies:[p.ez],encapsulation:2})),C})()}}]);